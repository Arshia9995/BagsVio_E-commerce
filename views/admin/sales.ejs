<%- include('header')-%>

<%- include('sidebar') -%>

<style>
.admin-content-container {
  margin-left: 0;
}
@media (min-width: 992px) {
  .admin-content-container {
    margin-left: 230px;
  }
}
</style>

<!-- Main Content -->
<div class="container mt-5 admin-content-container">
   
    <div class="row">
        <div class="col-md-6 mb-3">
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title"><strong>Total Income</strong></h5>
                    <p class="card-text"><strong><%= totalIncome %></strong></p>
                </div>
            </div>
        </div>
        <div class="col-md-6 mb-3">
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title"><strong>Total Quantity Sold</strong></h5>
                    <p class="card-text"><strong><%= totalQuantitySold %></strong></p>
                </div>
            </div>
        </div>
    </div>

   
     <div class="row">
      <div class="col-md-12">
          <h2>Sales Report</h2>
         

        
          <table class="table">
              <thead>
                  <tr>
                      <th>Customer Name</th>
                      <th>Total Price</th>
                      <th>Order Status</th>
                      <th>Product Name</th>
                      <th>Price</th>
                      <th>Quantity</th>
                      <th>Date</th>
                  </tr>
              </thead>
              <tbody>
               
                
                  <% orders.forEach(order => { %>
                      <% if (order.status === 'Delivered') { %>
                          <% order.products.forEach(product => { %>
                              <tr>
                                  <td><%= order.userId.name %></td> 
                                  <td><%= order.totalPrice %></td>
                                  <td><%= order.status %></td> 
                                  <td><%= product.productId.ProductName %></td> 
                                  <td><%= product.price %></td> 
                                  <td><%= product.quantity %></td> 
                                  <td><%= order.orderDate.toDateString() %></td> 
                              </tr>
                            
                          <% }) %>
                      <% } %>
                  <% }) %>
                 
              </tbody>
          </table>
      </div>
  </div>
</div>

<%- include('footer')-%>


